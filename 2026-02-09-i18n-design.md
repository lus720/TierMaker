# TierMakerPlus ä¸­è‹±å›½é™…åŒ–è®¾è®¡æ–¹æ¡ˆ

> **å¼€å‘åˆ†æ”¯**: [en](file:///c:/Users/12192/TierMaker/src/utils/storage.ts#324-327) (åŸºäº main åˆ›å»º)
>
> å®Œæˆååˆå¹¶å› main

## 1. éœ€æ±‚æ€»ç»“

| éœ€æ±‚ | å†³ç­– |
|------|------|
| åŸŸåç­–ç•¥ | å•åŸŸå + è¯­è¨€åˆ‡æ¢æŒ‰é’® |
| è¯­è¨€æ£€æµ‹ | æµè§ˆå™¨è¯­è¨€è‡ªåŠ¨æ£€æµ‹ï¼Œç”¨æˆ·å¯æ‰‹åŠ¨åˆ‡æ¢ |
| ç¿»è¯‘æ–¹æ¡ˆ | vue-i18nï¼ˆè§£è€¦ã€è¡Œä¸šæ ‡å‡†ï¼‰ |
| æ•°æ®éš”ç¦» | ä¸­è‹±å…±äº« IndexedDBï¼Œä½œå“æ•°æ®ä¸å˜ |
| ç­‰çº§å¤„ç† | ç”¨æˆ·è‡ªå®šä¹‰ä¼˜å…ˆï¼Œå¦åˆ™æŒ‰è¯­è¨€æ˜¾ç¤ºé»˜è®¤å€¼ |

---

## 2. ç°æœ‰åŠŸèƒ½å½±å“åˆ†æ

> [!IMPORTANT]
> **æ ¸å¿ƒåŸåˆ™**ï¼ši18n åªå½±å“ **UI æ˜¾ç¤ºå±‚**ï¼Œä¸å½±å“ **æ•°æ®å±‚** å’Œ **ä¸šåŠ¡é€»è¾‘å±‚**ã€‚

### 2.1 ä¸å—å½±å“çš„åŠŸèƒ½

| åŠŸèƒ½ | åŸå›  |
|------|------|
| **æ‹–åŠ¨æ’åº** | [dragManager.ts](file:///c:/Users/12192/TierMaker/src/utils/dragManager.ts) åŸºäº DOM æ“ä½œå’Œ `rowId` è¯†åˆ«å®¹å™¨ï¼Œä¸è¯­è¨€æ— å…³ |
| **ä½œå“æ•°æ®** | [AnimeItem](file:///c:/Users/12192/TierMaker/src/types.ts#12-28) å­˜å‚¨åœ¨ IndexedDBï¼Œä¸åŒ…å«è¯­è¨€å­—æ®µ |
| **å›¾ç‰‡è£å‰ª** | [EditItemModal.vue](file:///c:/Users/12192/TierMaker/src/components/EditItemModal.vue) çš„è£å‰ªé€»è¾‘åŸºäºåƒç´ åæ ‡ï¼Œä¸è¯­è¨€æ— å…³ |
| **ä¸»é¢˜åˆ‡æ¢** | CSS å˜é‡é©±åŠ¨ï¼Œä¸è¯­è¨€æ— å…³ |
| **æœç´¢åŠŸèƒ½** | API è°ƒç”¨ï¼ˆBangumi/VNDBï¼‰ä¸è¯­è¨€æ— å…³ |

### 2.2 éœ€è¦å¤„ç†çš„åŠŸèƒ½

#### 2.2.1 ç­‰çº§æ ‡ç­¾ (TierConfig)

**ç°çŠ¶**ï¼š

```typescript
// types.ts
interface TierConfig {
  id: string    // ä¾‹å¦‚ "å¤¯"
  label: string // ä¾‹å¦‚ "å¤¯" (ä¸ id ç›¸åŒ)
  color: string
  order: number
}
```

**é—®é¢˜**ï¼š[id](file:///c:/Users/12192/TierMaker/src/utils/storage.ts#29-38) å’Œ `label` ä½¿ç”¨ç›¸åŒçš„ä¸­æ–‡å­—ç¬¦ä¸²ï¼Œå¯¼è‡´ï¼š

1. åˆ‡æ¢è¯­è¨€æ—¶ [id](file:///c:/Users/12192/TierMaker/src/utils/storage.ts#29-38) ä¹Ÿä¼šå˜åŒ–ï¼ˆå¦‚æœç›´æ¥æ›¿æ¢ä¸ºè‹±æ–‡ç­‰çº§ï¼‰
2. ä½œå“ä¸ç­‰çº§çš„å…³è”å…³ç³»æ–­è£‚ï¼ˆ`Tier.id` éœ€è¦ä¸ `TierConfig.id` åŒ¹é…ï¼‰

**è§£å†³æ–¹æ¡ˆ**ï¼š

```typescript
// æ–°å¢ï¼šæ£€æµ‹æ˜¯å¦ä¸ºé»˜è®¤ç­‰çº§
function isDefaultTierConfig(configs: TierConfig[]): boolean {
  const labels = configs.map(c => c.label)
  const zhDefaults = ['å¤¯', 'é¡¶çº§', 'äººä¸Šäºº', 'NPC', 'æ‹‰å®Œäº†']
  const enDefaults = ['S', 'A', 'B', 'C', 'D']
  return JSON.stringify(labels) === JSON.stringify(zhDefaults) ||
         JSON.stringify(labels) === JSON.stringify(enDefaults)
}

// åˆ‡æ¢è¯­è¨€æ—¶ï¼š
// - å¦‚æœ isDefaultTierConfig() === trueï¼Œæ›¿æ¢ä¸ºç›®æ ‡è¯­è¨€çš„é»˜è®¤ç­‰çº§
// - å¦åˆ™ä¿ç•™ç”¨æˆ·è‡ªå®šä¹‰ç­‰çº§
```

**å½±å“èŒƒå›´**ï¼šâœ… ä½é£é™©ï¼ˆåªåœ¨ `handleLanguageChange` æ—¶å¤„ç†ï¼‰

---

#### 2.2.2 å¯¼å‡ºåŠŸèƒ½ (ExportModal)

**ç°çŠ¶**ï¼š

```typescript
// storage.ts - exportAllData()
export interface ExportData {
  tiers: Tier[]
  tierConfigs: TierConfig[]  // åŒ…å«å½“å‰è¯­è¨€çš„ç­‰çº§é…ç½®
  title: string
  exportDate: string
  version: string
}
```

**é—®é¢˜**ï¼š

- å¯¼å‡ºçš„ JSON åŒ…å«å½“å‰è¯­è¨€çš„ç­‰çº§æ ‡ç­¾
- å¦‚æœç”¨æˆ·åœ¨ä¸­æ–‡ç•Œé¢å¯¼å‡ºï¼Œåœ¨è‹±æ–‡ç•Œé¢å¯¼å…¥ï¼Œç­‰çº§æ ‡ç­¾ä»ä¸ºä¸­æ–‡

15:04:47 [vite] (client) hmr update /src/App.vue
15:04:47 [vite] (client) Pre-transform error: Element is missing end tag.
  Plugin: vite:vue
  File: C:/Users/12192/TierMaker/src/components/ConfigModal.vue:360:3
  358 |  
  359 |  <template>
  360 |    <div class="modal-overlay" @mousedown="handleMouseDown" @mouseup="handleMouseUp">
      |     ^
  361 |      <div class="modal-content" ref="modalContentRef">
  362 |        <div class="modal-header">

15:06:51 [vite] Internal server error: Element is missing end tag.
  Plugin: vite:vue
  File: C:/Users/12192/TierMaker/src/components/ConfigModal.vue:360:3
  358 |
  359 |  <template>
  360 |    <div class="modal-overlay" @mousedown="handleMouseDown" @mouseup="handleMouseUp">
      |     ^
  361 |      <div class="modal-content" ref="modalContentRef">
  362 |        <div class="modal-header">
      at createCompilerError (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:1378:17)
      at emitError (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:3014:5)
      at Object.onclosetag (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:2381:13)
      at Tokenizer.stateInClosingTagName (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:799:16)
      at Tokenizer.parse (C:\Users\12

15:04:47 [vite] (client) hmr update /src/App.vue
15:04:47 [vite] (client) Pre-transform error: Element is missing end tag.
  Plugin: vite:vue
  File: C:/Users/12192/TierMaker/src/components/ConfigModal.vue:360:3
  358 |  
  359 |  <template>
  360 |    <div class="modal-overlay" @mousedown="handleMouseDown" @mouseup="handleMouseUp">
      |     ^
  361 |      <div class="modal-content" ref="modalContentRef">
  362 |        <div class="modal-header">

15:06:51 [vite] Internal server error: Element is missing end tag.
  Plugin: vite:vue
  File: C:/Users/12192/TierMaker/src/components/ConfigModal.vue:360:3
  358 |
  359 |  <template>
  360 |    <div class="modal-overlay" @mousedown="handleMouseDown" @mouseup="handleMouseUp">
      |     ^
  361 |      <div class="modal-content" ref="modalContentRef">
  362 |        <div class="modal-header">
      at createCompilerError (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:1378:17)
      at emitError (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:3014:5)
      at Object.onclosetag (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:2381:13)
      at Tokenizer.stateInClosingTagName (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:799:16)
      at Tokenizer.parse (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:1157:16)
      at Object.baseParse (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:3053:13)
      at Object.parse (C:\Users\12192\TierMaker\node_modules\@vue\compiler-dom\dist\compiler-dom.cjs.js:910:23)
      at Object.parse$1 [as parse] (C:\Users\12192\TierMaker\node_modules\@vue\compiler-sfc\dist\compiler-sfc.cjs.js:1824:24)
      at createDescriptor (file:///C:/Users/12192/TierMaker/node_modules/@vitejs/plugin-vue/dist/index.mjs:54:42)
      at handleHotUpdate (file:///C:/Users/12192/TierMaker/node_modules/@vitejs/plugin-vue/dist/index.mjs:1162:25)
192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:1157:16)
      at Object.baseParse (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:3053:13)
      at Object.parse (C:\Users\12192\TierMaker\node_modules\@vue\compiler-dom\dist\compiler-dom.cjs.js:910:23)
      at Object.parse$1 [as parse] (C:\Users\12192\TierMaker\node_modules\@vue\compiler-sfc\dist\compiler-sfc.cjs.js:1824:24)
      at createDescriptor (file:///C:/Users/12192/TierMaker/node_modules/@vitejs/plugin-vue/dist/index.mjs:54:42)
      at handleHotUpdate (file:///C:/Users/12192/TierMaker/node_modules/@vitejs/plugin-vue/dist/index.mjs:1162:25)

**è§£å†³æ–¹æ¡ˆ**ï¼šè¿™æ˜¯é¢„æœŸè¡Œä¸ºï¼Œå› ä¸ºï¼š

1. å¯¼å‡ºæ˜¯"æ•°æ®å¿«ç…§"ï¼Œåº”ä¿ç•™ç”¨æˆ·å½“æ—¶çš„é…ç½®
2. ç”¨æˆ·å¯åœ¨è®¾ç½®ä¸­æ‰‹åŠ¨ä¿®æ”¹ç­‰çº§æ ‡ç­¾

**å½±å“èŒƒå›´**ï¼šâœ… æ— éœ€ä¿®æ”¹é€»è¾‘ï¼Œåªéœ€ç¿»è¯‘ UI æ–‡æœ¬

---

#### 2.2.3 å¯¼å…¥åŠŸèƒ½ (ImportModal)

**ç°çŠ¶**ï¼š

- ä» JSON æ–‡ä»¶å¯¼å…¥
- ä» VNDB ç”¨æˆ·åˆ—è¡¨å¯¼å…¥
- ä» Bangumi å­£åº¦åˆ—è¡¨å¯¼å…¥

**é—®é¢˜**ï¼šå¯¼å…¥æ—¶çš„æç¤ºæ–‡æœ¬éœ€è¦ç¿»è¯‘

15:04:47 [vite] (client) hmr update /src/App.vue
15:04:47 [vite] (client) Pre-transform error: Element is missing end tag.
  Plugin: vite:vue
  File: C:/Users/12192/TierMaker/src/components/ConfigModal.vue:360:3
  358 |  
  359 |  <template>
  360 |    <div class="modal-overlay" @mousedown="handleMouseDown" @mouseup="handleMouseUp">
      |     ^
  361 |      <div class="modal-content" ref="modalContentRef">
  362 |        <div class="modal-header">

15:06:51 [vite] Internal server error: Element is missing end tag.
  Plugin: vite:vue
  File: C:/Users/12192/TierMaker/src/components/ConfigModal.vue:360:3
  358 |
  359 |  <template>
  360 |    <div class="modal-overlay" @mousedown="handleMouseDown" @mouseup="handleMouseUp">
      |     ^
  361 |      <div class="modal-content" ref="modalContentRef">
  362 |        <div class="modal-header">
      at createCompilerError (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:1378:17)
      at emitError (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:3014:5)
      at Object.onclosetag (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:2381:13)
      at Tokenizer.stateInClosingTagName (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:799:16)
      at Tokenizer.parse (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:1157:16)
      at Object.baseParse (C:\Users\12192\TierMaker\node_modules\@vue\compiler-core\dist\compiler-core.cjs.js:3053:13)
      at Object.parse (C:\Users\12192\TierMaker\node_modules\@vue\compiler-dom\dist\compiler-dom.cjs.js:910:23)
      at Object.parse$1 [as parse] (C:\Users\12192\TierMaker\node_modules\@vue\compiler-sfc\dist\compiler-sfc.cjs.js:1824:24)
      at createDescriptor (file:///C:/Users/12192/TierMaker/node_modules/@vitejs/plugin-vue/dist/index.mjs:54:42)
      at handleHotUpdate (file:///C:/Users/12192/TierMaker/node_modules/@vitejs/plugin-vue/dist/index.mjs:1162:25)

**è§£å†³æ–¹æ¡ˆ**ï¼š

```vue
<!-- ç¿»è¯‘å‰ -->
<p class="description">è¾“å…¥æ‚¨çš„ VNDB ç”¨æˆ· ID ä»¥å¯¼å…¥æ‚¨çš„è§†è§‰å°è¯´åˆ—è¡¨ã€‚</p>

<!-- ç¿»è¯‘å -->
<p class="description">{{ t('import.vndbDesc') }}</p>
```

**å½±å“èŒƒå›´**ï¼šâœ… çº¯ UI ç¿»è¯‘ï¼Œä¸å½±å“å¯¼å…¥é€»è¾‘

---

#### 2.2.4 ç¼–è¾‘ä½œå“ (EditItemModal)

**ç°çŠ¶**ï¼šæ‰€æœ‰è¡¨å•æ ‡ç­¾å’ŒæŒ‰é’®éƒ½æ˜¯ç¡¬ç¼–ç ä¸­æ–‡

**é—®é¢˜**ï¼šéœ€è¦ç¿»è¯‘çº¦ 15 ä¸ªæ–‡æœ¬

**å½±å“èŒƒå›´**ï¼šâœ… çº¯ UI ç¿»è¯‘ï¼Œä¸å½±å“ç¼–è¾‘é€»è¾‘

---

#### 2.2.5 è®¾ç½®é¡µé¢ (ConfigModal)

**ç°çŠ¶**ï¼šåŒ…å«ç­‰çº§é…ç½®ç¼–è¾‘ã€ä¸»é¢˜åˆ‡æ¢ã€å¯¼å‡ºå€ç‡ç­‰è®¾ç½®

**é—®é¢˜**ï¼š

1. éœ€è¦ç¿»è¯‘æ‰€æœ‰æ ‡ç­¾å’ŒæŒ‰é’®
2. **é‡è¦**ï¼šéœ€è¦æ·»åŠ è¯­è¨€é€‰æ‹©ä¸‹æ‹‰æ¡†

**æ–°å¢åŠŸèƒ½**ï¼š

```vue
<div class="form-group">
  <label>{{ t('settings.language') }}</label>
  <select v-model="currentLocale" @change="handleLanguageChange">
    <option value="zh">ä¸­æ–‡</option>
    <option value="en">English</option>
  </select>
</div>
```

**å½±å“èŒƒå›´**ï¼šâš ï¸ ä¸­ç­‰é£é™©ï¼ˆéœ€è¦æ–°å¢è¯­è¨€åˆ‡æ¢é€»è¾‘å’Œç­‰çº§è”åŠ¨ï¼‰

---

### 2.3 é£é™©çŸ©é˜µ

| é£é™© | ç­‰çº§ | å½±å“ | ç¼“è§£æªæ–½ |
|------|------|------|---------|
| ç­‰çº§ ID å˜åŒ–å¯¼è‡´æ•°æ®å…³è”æ–­è£‚ | ğŸ”´ é«˜ | ä½œå“ä¸¢å¤± | ä¿æŒ `Tier.id` ä¸å˜ï¼Œåªä¿®æ”¹ `TierConfig.label` |
| ç¿»è¯‘é—æ¼å¯¼è‡´ä¸­è‹±æ··æ˜¾ | ğŸŸ¡ ä¸­ | ç”¨æˆ·ä½“éªŒå·® | åˆ›å»ºå®Œæ•´çš„ç¿»è¯‘æ–‡ä»¶æ¸…å• |
| è¯­è¨€åˆ‡æ¢åæ‹–åŠ¨å¼‚å¸¸ | ğŸŸ¢ ä½ | æ—  | æ‹–åŠ¨é€»è¾‘ä¸è¯­è¨€æ— å…³ |
| å¯¼å…¥æ—§ç‰ˆæ•°æ®å…¼å®¹æ€§ | ğŸŸ¢ ä½ | æ—  | [ExportData](file:///c:/Users/12192/TierMaker/src/utils/storage.ts#308-317) ç»“æ„ä¸å˜ |

---

## 3. æ¶æ„è®¾è®¡

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  App.vue                                                 â”‚
â”‚  â”œâ”€ useI18n() â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚  â”‚   â””â”€ locale: ref<'zh' | 'en'>                       â”‚â”‚
â”‚  â”‚                                                      â”‚â”‚
â”‚  â”œâ”€ è¯­è¨€é€‰æ‹©ä¼˜å…ˆçº§ï¼š                                    â”‚â”‚
â”‚  â”‚   1. localStorage['user-language'] (ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©)   â”‚â”‚
â”‚  â”‚   2. navigator.language (æµè§ˆå™¨è¯­è¨€)                â”‚â”‚
â”‚  â”‚   3. 'zh' (é»˜è®¤)                                    â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                          â”‚
â”‚  æ•°æ®å±‚ (ä¸è¯­è¨€æ— å…³)                                     â”‚
â”‚  â”œâ”€ IndexedDB: tier-list-data                           â”‚
â”‚  â”œâ”€ localStorage: tier-config (ç­‰çº§é…ç½®)                â”‚
â”‚  â””â”€ localStorage: user-language (è¯­è¨€åå¥½)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. æ ¸å¿ƒå®ç°

### 4.1 vue-i18n é…ç½®

#### [NEW] [i18n.ts](file:///c:/Users/12192/TierMaker/src/i18n/index.ts)

```typescript
import { createI18n } from 'vue-i18n'
import zh from './locales/zh.json'
import en from './locales/en.json'

function getDefaultLocale(): 'zh' | 'en' {
  // 1. ç”¨æˆ·æ‰‹åŠ¨é€‰æ‹©
  const saved = localStorage.getItem('user-language')
  if (saved === 'zh' || saved === 'en') return saved
  
  // 2. æµè§ˆå™¨è¯­è¨€
  const browserLang = navigator.language || ''
  if (browserLang.startsWith('en')) return 'en'
  
  // 3. é»˜è®¤ä¸­æ–‡
  return 'zh'
}

export const i18n = createI18n({
  legacy: false,  // ä½¿ç”¨ Composition API
  locale: getDefaultLocale(),
  fallbackLocale: 'zh',
  messages: { zh, en }
})
```

#### [NEW] [zh.json](file:///c:/Users/12192/TierMaker/src/i18n/locales/zh.json)

```json
{
  "header": {
    "title": "TierMakerPlus",
    "addItem": "æ·»åŠ ä½œå“",
    "settings": "è®¾ç½®",
    "export": "å¯¼å‡º",
    "import": "å¯¼å…¥"
  },
  "tierLabels": {
    "default": ["å¤¯", "é¡¶çº§", "äººä¸Šäºº", "NPC", "æ‹‰å®Œäº†"]
  },
  "settings": {
    "title": "è®¾ç½®",
    "theme": "ä¸»é¢˜",
    "language": "è¯­è¨€",
    "tierConfig": "ç­‰çº§é…ç½®",
    "reset": "é‡ç½®è®¾ç½®",
    "clearData": "æ¸…ç©ºæ•°æ®"
  },
  "search": {
    "placeholder": "æœç´¢ä½œå“...",
    "source": "æœç´¢æº",
    "noResults": "æ— ç»“æœ"
  }
}
```

#### [NEW] [en.json](file:///c:/Users/12192/TierMaker/src/i18n/locales/en.json)

```json
{
  "header": {
    "title": "TierMakerPlus",
    "addItem": "Add Item",
    "settings": "Settings",
    "export": "Export",
    "import": "Import"
  },
  "tierLabels": {
    "default": ["S", "A", "B", "C", "D"]
  },
  "settings": {
    "title": "Settings",
    "theme": "Theme",
    "language": "Language",
    "tierConfig": "Tier Config",
    "reset": "Reset Settings",
    "clearData": "Clear Data"
  },
  "search": {
    "placeholder": "Search...",
    "source": "Source",
    "noResults": "No results"
  }
}
```

### 4.2 ç­‰çº§æ ‡ç­¾å¤„ç†é€»è¾‘

> [!CAUTION]
> **å…³é”®åŸåˆ™**ï¼šåˆ‡æ¢è¯­è¨€æ—¶åªä¿®æ”¹ `label`ï¼Œç»ä¸ä¿®æ”¹ [id](file:///c:/Users/12192/TierMaker/src/utils/storage.ts#29-38)ï¼Œå¦åˆ™ä¼šå¯¼è‡´ `Tier.id` ä¸ `TierConfig.id` ä¸åŒ¹é…ï¼Œä½œå“æ•°æ®ä¸¢å¤±ã€‚

```typescript
// åˆ¤æ–­å½“å‰ç­‰çº§æ˜¯å¦ä¸ºé»˜è®¤ç­‰çº§ï¼ˆä¸­æ–‡æˆ–è‹±æ–‡ï¼‰
function isDefaultTierConfig(configs: TierConfig[]): boolean {
  const labels = configs.map(c => c.label)
  const zhDefaults = ['å¤¯', 'é¡¶çº§', 'äººä¸Šäºº', 'NPC', 'æ‹‰å®Œäº†']
  const enDefaults = ['S', 'A', 'B', 'C', 'D']
  
  return JSON.stringify(labels) === JSON.stringify(zhDefaults) ||
         JSON.stringify(labels) === JSON.stringify(enDefaults)
}

// åˆ‡æ¢è¯­è¨€æ—¶çš„ç­‰çº§å¤„ç†ï¼ˆå…³é”®ï¼šåªæ”¹ labelï¼Œä¸æ”¹ idï¼‰
function handleLanguageChange(newLocale: 'zh' | 'en') {
  const configs = loadTierConfigs()
  
  if (isDefaultTierConfig(configs)) {
    // ç”¨æˆ·ä½¿ç”¨é»˜è®¤ç­‰çº§ï¼Œåªæ›´æ–° label ä¸ºç›®æ ‡è¯­è¨€
    const newLabels = newLocale === 'zh' 
      ? ['å¤¯', 'é¡¶çº§', 'äººä¸Šäºº', 'NPC', 'æ‹‰å®Œäº†']
      : ['S', 'A', 'B', 'C', 'D']
    
    configs.forEach((config, i) => {
      config.label = newLabels[i]  // âœ… åªæ”¹ label
      // config.id ä¿æŒä¸å˜ï¼    // âœ… id ä¸åŠ¨
    })
    
    saveTierConfigs(configs)
  }
  // ç”¨æˆ·è‡ªå®šä¹‰ç­‰çº§æ—¶ï¼Œä¿æŒä¸å˜
  
  localStorage.setItem('user-language', newLocale)
  i18n.global.locale.value = newLocale
}
```

**æ•°æ®å…³ç³»ç¤ºæ„**ï¼š

```
åˆ‡æ¢è¯­è¨€å‰ (ä¸­æ–‡):
â”œâ”€ TierConfig: { id: "å¤¯", label: "å¤¯" }
â””â”€ Tier: { id: "å¤¯" }  â† é€šè¿‡ id åŒ¹é…

åˆ‡æ¢è¯­è¨€å (è‹±æ–‡):
â”œâ”€ TierConfig: { id: "å¤¯", label: "S" }  â† åªæ”¹äº† label
â””â”€ Tier: { id: "å¤¯" }  â† ä»ç„¶åŒ¹é…ï¼ä½œå“ä¸ä¸¢å¤±
```

### 4.3 éœ€è¦ç¿»è¯‘çš„ç»„ä»¶æ¸…å•

| ç»„ä»¶ | éœ€ç¿»è¯‘å†…å®¹ |
|------|-----------|
| [App.vue](file:///c:/Users/12192/TierMaker/src/App.vue) | æ ‡é¢˜ã€æŒ‰é’®æ–‡æœ¬ |
| [ConfigModal.vue](file:///c:/Users/12192/TierMaker/src/components/ConfigModal.vue) | è®¾ç½®é¡µæ‰€æœ‰æ ‡ç­¾ã€æŒ‰é’®ã€æç¤ºæ–‡æœ¬ |
| [SearchModal.vue](file:///c:/Users/12192/TierMaker/src/components/SearchModal.vue) | æœç´¢æ¡†å ä½ç¬¦ã€æœç´¢æºé€‰é¡¹ã€æ— ç»“æœæç¤º |
| [EditItemModal.vue](file:///c:/Users/12192/TierMaker/src/components/EditItemModal.vue) | ç¼–è¾‘æ¡†æ ‡é¢˜ã€ä¿å­˜/å–æ¶ˆæŒ‰é’® |
| [ExportModal.vue](file:///c:/Users/12192/TierMaker/src/components/ExportModal.vue) | å¯¼å‡ºé€‰é¡¹ã€æŒ‰é’®æ–‡æœ¬ |
| [ImportModal.vue](file:///c:/Users/12192/TierMaker/src/components/ImportModal.vue) | å¯¼å…¥è¯´æ˜ã€æŒ‰é’®æ–‡æœ¬ |
| [TierRow.vue](file:///c:/Users/12192/TierMaker/src/components/TierRow.vue) | åˆ é™¤æŒ‰é’® title |

---

## 5. å®ç°æ­¥éª¤

### Phase 1: åŸºç¡€è®¾æ–½

- [ ] å®‰è£… vue-i18n ä¾èµ–
- [ ] åˆ›å»º `src/i18n/` ç›®å½•ç»“æ„
- [ ] åˆ›å»º zh.json å’Œ en.json ç¿»è¯‘æ–‡ä»¶
- [ ] åœ¨ main.ts ä¸­æ³¨å†Œ i18n æ’ä»¶

### Phase 2: è¯­è¨€åˆ‡æ¢ UI

- [ ] åœ¨ ConfigModal æ·»åŠ è¯­è¨€é€‰æ‹©ä¸‹æ‹‰æ¡†
- [ ] å®ç° `handleLanguageChange()` å‡½æ•°
- [ ] å¤„ç†ç­‰çº§æ ‡ç­¾çš„è¯­è¨€è”åŠ¨é€»è¾‘

### Phase 3: ç»„ä»¶ç¿»è¯‘

- [ ] é€ä¸ªç»„ä»¶æ›¿æ¢ç¡¬ç¼–ç æ–‡æœ¬ä¸º [t('key')](file:///c:/Users/12192/TierMaker/src/utils/configManager.ts#193-206)
- [ ] æå–æ‰€æœ‰ç”¨æˆ·å¯è§æ–‡æœ¬åˆ°ç¿»è¯‘æ–‡ä»¶

### Phase 4: éªŒè¯

- [ ] åˆ‡æ¢è¯­è¨€å UI æ­£ç¡®æ˜¾ç¤º
- [ ] ä½œå“æ•°æ®ä¸å˜
- [ ] è‡ªå®šä¹‰ç­‰çº§ä¸è¢«è¦†ç›–
- [ ] é¦–æ¬¡è®¿é—®æ—¶æ­£ç¡®æ£€æµ‹æµè§ˆå™¨è¯­è¨€

---

## 6. å…³é”®æ³¨æ„äº‹é¡¹

> [!WARNING]
> **ç­‰çº§ ID ä¸æ ‡ç­¾åˆ†ç¦»**
>
> å½“å‰ `tierConfigs` çš„ [id](file:///c:/Users/12192/TierMaker/src/utils/storage.ts#29-38) å’Œ `label` æ˜¯ç›¸åŒçš„ï¼ˆå¦‚ `id: 'å¤¯', label: 'å¤¯'`ï¼‰ã€‚
> å›½é™…åŒ–åéœ€è¦ï¼š
>
> - [id](file:///c:/Users/12192/TierMaker/src/utils/storage.ts#29-38) ä¿æŒä¸ºè¯­è¨€æ— å…³çš„æ ‡è¯†ç¬¦ï¼ˆå¦‚ `tier-0`, `tier-1`ï¼‰
> - `label` å­˜å‚¨ç”¨æˆ·å¯è§çš„æ–‡æœ¬

> [!IMPORTANT]
> **config.yaml çš„ tiers å­—æ®µ**
>
> éœ€è¦æ‹†åˆ†ä¸ºä¸¤ä»½è¯­è¨€é…ç½®ï¼Œæˆ–æ”¹ä¸ºä» i18n JSON è¯»å–é»˜è®¤å€¼ã€‚

---

## 7. ä¾èµ–å˜æ›´

```bash
npm install vue-i18n@9
```

---

## 8. æ–‡ä»¶å˜æ›´æ¸…å•

| æ“ä½œ | æ–‡ä»¶è·¯å¾„ |
|------|---------|
| [NEW] | `src/i18n/index.ts` |
| [NEW] | `src/i18n/locales/zh.json` |
| [NEW] | `src/i18n/locales/en.json` |
| [MODIFY] | [src/main.ts](file:///c:/Users/12192/TierMaker/src/main.ts) (æ³¨å†Œ i18n) |
| [MODIFY] | [src/App.vue](file:///c:/Users/12192/TierMaker/src/App.vue) |
| [MODIFY] | [src/components/ConfigModal.vue](file:///c:/Users/12192/TierMaker/src/components/ConfigModal.vue) |
| [MODIFY] | [src/components/SearchModal.vue](file:///c:/Users/12192/TierMaker/src/components/SearchModal.vue) |
| [MODIFY] | [src/components/EditItemModal.vue](file:///c:/Users/12192/TierMaker/src/components/EditItemModal.vue) |
| [MODIFY] | [src/components/ExportModal.vue](file:///c:/Users/12192/TierMaker/src/components/ExportModal.vue) |
| [MODIFY] | [src/components/ImportModal.vue](file:///c:/Users/12192/TierMaker/src/components/ImportModal.vue) |
| [MODIFY] | [src/utils/storage.ts](file:///c:/Users/12192/TierMaker/src/utils/storage.ts) (ç­‰çº§å¤„ç†é€»è¾‘) |
